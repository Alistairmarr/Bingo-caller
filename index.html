<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bingo Caller â€“ Simple</title>
<style>
  :root{--bg:#0b1020;--card:#121933;--ink:#eef2ff;--muted:#9aa3c7;--accent:#e53935;--overscan:32px;--numCol:40vmin;--cell:56px;--gap:6px}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:linear-gradient(180deg,#0b1020,#0f1530);color:var(--ink);min-height:100dvh}
  .wrap{max-width:none;margin:0 auto;padding:16px}
  header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
  h1{margin:0;font-size:clamp(18px,3vw,28px)}
  .btn{appearance:none;border:none;border-radius:14px;padding:10px 14px;font-weight:800;cursor:pointer;background:#1a244a;color:var(--ink)}
  .card{background:linear-gradient(180deg,#121933,#0f1733);border:1px solid #1e2a52;border-radius:18px;padding:12px}

  /* Big area */
  .panel{display:grid;gap:14px}
  .top{display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap}
  .now{font-size:clamp(72px,18vw,200px);line-height:1;margin:0;font-weight:900;text-align:center}
  .callstrip{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}
  .chip{background:#0f1530;border:1px solid #233060;border-radius:10px;padding:6px 10px;font-weight:700}

  /* Grid map */
  .grid{display:grid;grid-template-columns:repeat(10,var(--cell));gap:var(--gap);justify-content:center}
  .num{width:var(--cell);height:var(--cell);display:grid;place-items:center;border-radius:12px;border:1px solid #233060;background:#0f1530;color:#cbd5ff;font-weight:800;font-size:calc(var(--cell)*0.38)}
  .num.hit{background:#ffeb3b;color:#000;border-color:#f57c00;box-shadow:0 0 10px #ff9800;font-weight:900}
  .num.current{outline:3px solid #10b981}

  /* Big NEXT button */
  #bigNext{background:var(--accent);color:#fff;border-radius:50%;width:min(40vw,220px);height:min(40vw,220px);font-size:clamp(18px,3.5vw,28px);font-weight:900;display:flex;align-items:center;justify-content:center;box-shadow:0 0 16px rgba(229,57,53,.7);border:none;transition:transform .08s ease;user-select:none}
  #bigNext:active{transform:scale(1.05)}

  /* Minimal helpers */
  body.audience #last{grid-column:1 / span 2;grid-row:3;justify-content:center;}
  .meta{display:flex;justify-content:center;gap:10px;color:var(--muted)}
  body.audience #bigNext{display:none !important}

  /* === Audience animations === */
  /* Stronger big-number boom */
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸŽ‰ Bingo Caller (Simple)</h1>
      <div id="controls">
        
        <button class="btn" id="resetBtn">Reset</button>
      </div>
    </header>

    <section class="card panel">
      <div class="top">
        <h2 class="now" id="now">â€”</h2>
        <button id="bigNext">NEXT â–¶</button>
      </div>
      <div class="meta"><span id="drawnCount">0 / 90 drawn</span></div>
      <div class="grid" id="grid"></div>
      <div class="callstrip" id="last"></div>
    </section>
  </div>
  

<script>
(function(){
  const el=id=>document.getElementById(id);
  const gridEl=el('grid'), nowEl=el('now'), lastEl=el('last'), drawnCount=el('drawnCount');
  const bigNext=el('bigNext'), resetBtn=el('resetBtn');

  const storageKey='bingo:simple:v1';
  let total=90;
  let order=[...Array(total)].map((_,i)=>i+1);
  let drawn=[]; let current=null; let canPress=true;

  function shuffle(){
    order=[...Array(total)].map((_,i)=>i+1);
    for(let i=order.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [order[i],order[j]]=[order[j],order[i]]; }
  }
  function buildGrid(){
    gridEl.innerHTML='';
    for(let i=1;i<=total;i++){
      const d=document.createElement('div'); d.className='num'; d.dataset.n=i; d.textContent=String(i); gridEl.appendChild(d);
    }
  }
  function markGrid(){
    gridEl.querySelectorAll('.num').forEach(cell=>{ const n=+cell.dataset.n; cell.classList.toggle('hit', drawn.includes(n)); cell.classList.toggle('current', current===n); });
  }
  function updateUI(silent){
    nowEl.textContent=current || 'â€”';
    drawnCount.textContent=`${drawn.length} / ${total} drawn`;
    markGrid();
    lastEl.innerHTML='';
    drawn.slice(-10).reverse().forEach(n=>{ const c=document.createElement('span'); c.className='chip'; c.textContent=n; lastEl.appendChild(c); });
    if(!silent){
      try{ localStorage.setItem(storageKey, JSON.stringify({order, drawn, current, total})); }catch(e){}
    }
  }
  function nextNumber(){
    if(drawn.length===total) return;
    let next=null; for(const n of order){ if(!drawn.includes(n)){ next=n; break; } }
    drawn.push(next); current=next; updateUI();
  }
  function reset(allNew=true){ if(allNew) shuffle(); drawn=[]; current=null; updateUI(); }
  function load(){
    try{ const s=JSON.parse(localStorage.getItem(storageKey)||'{}');
      if(s.total===total && Array.isArray(s.order) && s.order.length===total){ order=s.order; }
      if(Array.isArray(s.drawn)) drawn=s.drawn.filter(n=>n>=1 && n<=total);
      if(typeof s.current==='number') current=s.current;
    }catch(e){}
  }

  // Init
  buildGrid(); shuffle(); load(); updateUI(true);
  // Auto-fit grid to viewport height so the grid never overflows
  function sizeGrid(){
    const cols=10, rows=9;
    const gap = parseFloat(getComputedStyle(gridEl).gap)||6;
    const rect = gridEl.getBoundingClientRect();
    const availW = rect.width;
    const availH = window.innerHeight - rect.top - 16; // 16px bottom padding
    const cellW = (availW - gap*(cols-1))/cols;
    const cellH = (availH - gap*(rows-1))/rows;
    const cell = Math.max(18, Math.floor(Math.min(cellW, cellH)));
    document.documentElement.style.setProperty('--cell', cell+'px');
  }
  sizeGrid();
  addEventListener('resize', sizeGrid);
  addEventListener('orientationchange', sizeGrid);

  // Events
  bigNext.addEventListener('click', ()=>{ if(!canPress) return; canPress=false; nextNumber(); setTimeout(()=>canPress=true, 250); });
  resetBtn.addEventListener('click', ()=>reset(confirm('Reshuffle numbers? OK=new order, Cancel=keep order')));
  document.addEventListener('keydown', (e)=>{ if(e.code==='Space'){ e.preventDefault(); nextNumber(); } });
})();
</script>
</body>
</html>
